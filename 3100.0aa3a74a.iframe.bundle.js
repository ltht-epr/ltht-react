"use strict";(self.webpackChunk_ltht_react_storybook=self.webpackChunk_ltht_react_storybook||[]).push([[3100],{"./src/ui/organisms/generic-table/generic-table.mockdata.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Zi:()=>buildActionsForQuestionnaire,rg:()=>mockMapper,_o:()=>mockSummaryDefinition,Ul:()=>mockSummaryRecordsList});var lib=__webpack_require__("../types/lib/index.js"),utils_lib=__webpack_require__("../utils/lib/index.js"),styles_lib=__webpack_require__("../styles/lib/index.js"),emotion_styled_browser_esm=__webpack_require__("../../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const StyledText=emotion_styled_browser_esm.default.div`
  text-decoration: line-through;
  color: gray;
`,QuestionnaireWithdrawnTableCell=_ref=>{let{text}=_ref;return(0,jsx_runtime.jsx)(StyledText,{children:text??""})};QuestionnaireWithdrawnTableCell.displayName="QuestionnaireWithdrawnTableCell";const questionnaire_withdrawn_table_cell=QuestionnaireWithdrawnTableCell;try{questionnairewithdrawntablecell.displayName="questionnairewithdrawntablecell",questionnairewithdrawntablecell.__docgenInfo={description:"",displayName:"questionnairewithdrawntablecell",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../components/styled/table/src/atoms/questionnaire-withdrawn-table-cell.tsx#questionnairewithdrawntablecell"]={docgenInfo:questionnairewithdrawntablecell.__docgenInfo,name:"questionnairewithdrawntablecell",path:"../../components/styled/table/src/atoms/questionnaire-withdrawn-table-cell.tsx#questionnairewithdrawntablecell"})}catch(__react_docgen_typescript_loader_error){}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const DEFAULT_VERTICAL_HEADER_CELL_STYLE={maxWidth:"15rem",textWrap:"wrap",textAlign:"left"},withdrawnWrapper=text=>(0,jsx_runtime.jsx)(questionnaire_withdrawn_table_cell,{text});withdrawnWrapper.displayName="withdrawnWrapper";const mapQuestionnaireObjectsToHorizontalTableData=(definitionItems,records,adminActions)=>{const tableData={headers:[{id:"date",type:"accessor",cellProps:{text:"Record Date"}},...recursivelyMapQuestionnaireItemsIntoHeaders(definitionItems)],rows:mapQuestionnaireResponsesIntoDataEntities(records,adminActions)};return adminActions&&tableData.headers.splice(1,0,{id:"adminactions",type:"accessor",cellProps:{text:"Actions"}}),tableData},recursivelyMapQuestionnaireItemsIntoHeaders=questionnaireItems=>questionnaireItems.map((questionnaireItem=>{const subItems=(0,utils_lib.EnsureMaybeArray)(questionnaireItem.item??[]);return{id:questionnaireItem?.linkId??"",type:subItems.length>0?"group":"accessor",cellProps:{text:questionnaireItem?.text??""},subHeaders:recursivelyMapQuestionnaireItemsIntoHeaders(subItems)}})),mapQuestionnaireResponsesIntoDataEntities=(records,adminActions)=>records.filter((record=>!!record.item)).map((record=>{let dataEntity={};if(dataEntity.date={customComponentOverride:record.status===lib.QuestionnaireResponseStatus.EnteredInError?withdrawnWrapper((0,utils_lib.partialDateTimeText)(record.authored)):void 0,text:(0,utils_lib.partialDateTimeText)(record.authored)},adminActions){const adminActionsForThisDataEntity=adminActions.find((actionForForm=>actionForForm.questionnaire===record.id));adminActionsForThisDataEntity&&(dataEntity.adminactions={id:record.id,adminActions:adminActionsForThisDataEntity.adminActions,parentStyle:{zIndex:(0,styles_lib.getZIndex)(styles_lib.TableDataWithPopUp)}})}return record.item?.filter((item=>item?.linkId&&item?.answer)).forEach((item=>{const linkId=(0,utils_lib.EnsureMaybe)(item?.linkId),answer=(0,utils_lib.EnsureMaybe)(item?.answer?.find((answer=>!!answer)));dataEntity[linkId]=createCellPropsForAnswer(answer,!1,record.status===lib.QuestionnaireResponseStatus.EnteredInError),answer.item&&(dataEntity=recursivelyMapResponseItemsOntoData((0,utils_lib.EnsureMaybeArray)(answer.item),dataEntity,record.status))})),dataEntity})),recursivelyMapResponseItemsOntoData=(items,dataEntity,status)=>{let updatedDataEntity=_objectSpread({},dataEntity);return items.forEach((item=>{const firstAnswer=item.answer?item.answer[0]:void 0;if(item.linkId&&firstAnswer){const props=createCellPropsForAnswer(firstAnswer,!1,status===lib.QuestionnaireResponseStatus.EnteredInError);updatedDataEntity[item.linkId]={customComponentOverride:props.customComponentOverride,text:props.text},firstAnswer.item&&(updatedDataEntity=recursivelyMapResponseItemsOntoData((0,utils_lib.EnsureMaybeArray)(firstAnswer.item),updatedDataEntity,status))}})),updatedDataEntity},mapQuestionnaireObjectsToVerticalTableData=(definitionItems,records,adminActions)=>({headers:[{id:"property",type:"accessor",cellProps:{text:""}},...records.map((record=>({id:record?.id??"",type:"accessor",cellProps:{customComponentOverride:record.status===lib.QuestionnaireResponseStatus.EnteredInError?withdrawnWrapper((0,utils_lib.partialDateTimeText)(record.authored)??""):void 0,text:(0,utils_lib.partialDateTimeText)(record.authored)??""}})))],rows:buildVerticalCellRows(definitionItems,records,adminActions)}),buildVerticalCellRows=(definitionItems,records,adminActions)=>{const dataEntities=definitionItems.map((item=>{let dataEntity={};return dataEntity=buildVerticalCellRowsRecursive((0,utils_lib.EnsureMaybeArray)([item]),records,dataEntity),dataEntity}));if(adminActions){const actionsDataEntity={};return actionsDataEntity.property={text:"Actions",parentStyle:DEFAULT_VERTICAL_HEADER_CELL_STYLE},records.forEach((record=>{const adminActionsForThisDataEntity=adminActions.find((actionForForm=>actionForForm.questionnaire===record.id));adminActionsForThisDataEntity&&(actionsDataEntity[record.id]={id:record.id,adminActions:adminActionsForThisDataEntity.adminActions,parentStyle:{zIndex:(0,styles_lib.getZIndex)(styles_lib.TableDataWithPopUp)}})})),[actionsDataEntity].concat(dataEntities)}return dataEntities},buildVerticalCellRowsRecursive=(definitionItems,records,dataEntity)=>{let updatedDataEntity=_objectSpread({},dataEntity);return definitionItems.forEach((definitionItem=>{const containsChildItems=!!definitionItem.item&&definitionItem.item.length>0;updatedDataEntity.property={text:definitionItem.text??"",parentStyle:_objectSpread(_objectSpread({},DEFAULT_VERTICAL_HEADER_CELL_STYLE),{},{fontWeight:containsChildItems?"bold":"normal"})},definitionItem.linkId&&records.forEach((record=>{updatedDataEntity=getRecordItemByLinkId((0,utils_lib.EnsureMaybeArray)(record.item??[]),(0,utils_lib.EnsureMaybe)(definitionItem.linkId),updatedDataEntity,record.id,record.status)})),definitionItem.item&&definitionItem.item.length>0&&(updatedDataEntity.subRows=buildVerticalCellRows((0,utils_lib.EnsureMaybeArray)(definitionItem.item),records))})),updatedDataEntity},getRecordItemByLinkId=(recordItems,linkId,dataEntity,recordId,status)=>{let updatedDataEntity=_objectSpread({},dataEntity);return recordItems.forEach((recordItem=>{const recordItemAnswer=recordItem.answer&&recordItem.answer.length>0?(0,utils_lib.EnsureMaybe)(recordItem.answer[0]):void 0;recordItemAnswer&&(recordItem?.linkId&&recordItem?.linkId===linkId&&(updatedDataEntity[recordId]=createCellPropsForAnswer(recordItemAnswer,!0,status===lib.QuestionnaireResponseStatus.EnteredInError)),recordItemAnswer.item&&recordItemAnswer.item.length>0&&(updatedDataEntity=getRecordItemByLinkId((0,utils_lib.EnsureMaybeArray)(recordItemAnswer.item),linkId,updatedDataEntity,recordId,status)))})),updatedDataEntity},createCellPropsForAnswer=(answer,shouldRenderCheckbox,isEnteredInError)=>{if(answer.valueString)return shouldRenderCheckbox&&"CHECKBOX"===answer.valueString?{iconProps:{type:"checkbox",size:"medium"}}:{customComponentOverride:isEnteredInError?withdrawnWrapper(answer.valueString):void 0,text:answer.valueString};if(null!=answer.valueBoolean){const parsedBoolean=answer.valueBoolean?"Yes":"No";return{customComponentOverride:isEnteredInError?withdrawnWrapper(parsedBoolean):void 0,text:parsedBoolean}}return null!=answer.valueInteger?{customComponentOverride:isEnteredInError?withdrawnWrapper(answer.valueInteger.toString()):void 0,text:answer.valueInteger.toString()}:null!=answer.valueDecimal?{customComponentOverride:isEnteredInError?withdrawnWrapper(answer.valueDecimal.toString()):void 0,text:answer.valueDecimal.toString()}:{text:""}},questionnaire_table_methods=(definition,questionnaireResponses,axis,adminActions)=>{const definitionItems=(0,utils_lib.EnsureMaybeArray)((0,utils_lib.EnsureMaybe)(definition.item,[]));if(0!==definitionItems.length)return"y"===axis?mapQuestionnaireObjectsToVerticalTableData(definitionItems,questionnaireResponses,adminActions):mapQuestionnaireObjectsToHorizontalTableData(definitionItems,questionnaireResponses,adminActions)};let QuestionnairePublicationStatus=function(QuestionnairePublicationStatus){return QuestionnairePublicationStatus.Active="ACTIVE",QuestionnairePublicationStatus.Draft="DRAFT",QuestionnairePublicationStatus.Retired="RETIRED",QuestionnairePublicationStatus.Unknown="UNKNOWN",QuestionnairePublicationStatus}({});const mockSummaryDefinition={identifier:[],status:QuestionnairePublicationStatus.Draft,id:"1234abcd",metadata:{requestedWhen:"2021-07-01T13:15:15+01:00",isRedacted:!1,dataSources:[]},item:[{type:lib.QuestionnaireItemTypeCode.QuestionString,text:"What is your name?",linkId:"questionId1"},{type:lib.QuestionnaireItemTypeCode.QuestionString,text:"What is your quest?",linkId:"questionId2"},{type:lib.QuestionnaireItemTypeCode.QuestionString,text:"What is your favourite colour?",linkId:"questionId3"},{type:lib.QuestionnaireItemTypeCode.QuestionString,text:"What is the capital of Assyria?",linkId:"questionId4"},{type:lib.QuestionnaireItemTypeCode.Group,text:"What is the air speed velocity of an unladen swallow?",linkId:"questionId5",item:[{text:"African",type:lib.QuestionnaireItemTypeCode.QuestionString,linkId:"questionId5-SubSection1"},{text:"European",type:lib.QuestionnaireItemTypeCode.QuestionString,linkId:"questionId5-SubSection2"}]}]},mockSummaryRecordsList=[{authored:{value:"1975-05-25T17:27:23+00:00",kind:lib.PartialDateTimeKindCode.Date},item:[{linkId:"questionId1",answer:[{valueString:"Sir Lancelot of Camelot"}]},{linkId:"questionId2",answer:[{valueString:"To seek the Holy Grail"}]},{linkId:"questionId3",answer:[{valueString:"Blue"}]},{linkId:"questionId4",answer:[{valueString:"Assur"}]},{linkId:"questionId5",answer:[{valueString:"What do you mean, African or European?",item:[{linkId:"questionId5-SubSection1",answer:[{valueString:"~20.1 miles per hour"}]},{linkId:"questionId5-SubSection2",answer:[{valueString:"~24.9 miles per hour"}]}]}]}],status:lib.QuestionnaireResponseStatus.Completed,id:"S1rL4nc5l0t",metadata:{requestedWhen:"2021-07-01T13:15:15+01:00",isRedacted:!1,dataSources:[]}},{authored:{value:"1975-05-25T17:32:43+00:00",kind:lib.PartialDateTimeKindCode.Date},item:[{linkId:"questionId1",answer:[{valueString:"Sir Robin of Camelot"}]},{linkId:"questionId2",answer:[{valueString:"To seek the Holy Grail"}]},{linkId:"questionId3",answer:[{valueString:"Green"}]},{linkId:"questionId4",answer:[{valueString:"What? I don't know tha--WAAARGH"}]},{linkId:"questionId5",answer:[{valueString:"I don't know that",item:[{linkId:"questionId5-SubSection1",answer:[{valueString:"Faster than the Vicious Chicken of Bristol?"}]},{linkId:"questionId5-SubSection2",answer:[{valueString:"I've soiled my armour"}]}]}]}],status:lib.QuestionnaireResponseStatus.Completed,id:"S1rR0b1n",metadata:{requestedWhen:"2021-07-01T13:17:54+01:00",isRedacted:!1,dataSources:[]}}],buildActionsForQuestionnaire=(id,actions)=>({questionnaire:id,adminActions:actions.map((x=>({text:x,clickHandler:()=>{console.log(`${id}: ${x} action clicked!`)},leftIcon:{type:"info-circle",size:"medium",color:"info-blue"},exitFullScreenOnClick:!0})))}),mockMapper=(colData,rowData)=>{const mappedData=questionnaire_table_methods(colData,rowData,"x");if(!mappedData)throw Error("Something went wrong");return mappedData}}}]);
//# sourceMappingURL=3100.0aa3a74a.iframe.bundle.js.map